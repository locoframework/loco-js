{"version":3,"file":"loco.js","mappings":"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","sources":["webpack://Loco/webpack/universalModuleDefinition","webpack://Loco/external umd {\"commonjs\":\"loco-js-model\",\"commonjs2\":\"loco-js-model\",\"amd\":\"loco-js-model\",\"root\":\"LocoModel\"}","webpack://Loco/webpack/bootstrap","webpack://Loco/webpack/runtime/define property getters","webpack://Loco/webpack/runtime/hasOwnProperty shorthand","webpack://Loco/webpack/runtime/make namespace object","webpack://Loco/./src/deps.js","webpack://Loco/./src/utils/object.coffee","webpack://Loco/./src/wire/openRequest.js","webpack://Loco/./src/line/idempotencyKeys.js","webpack://Loco/./src/getModelForRemoteName.coffee","webpack://Loco/./src/wire/processNotification.js","webpack://Loco/./src/wire.coffee","webpack://Loco/./src/line.js","webpack://Loco/./src/line/processSystemNotification.js","webpack://Loco/./src/loco.coffee","webpack://Loco/./src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"loco-js-model\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"loco-js-model\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Loco\"] = factory(require(\"loco-js-model\"));\n\telse\n\t\troot[\"Loco\"] = factory(root[\"LocoModel\"]);\n})(self, (__WEBPACK_EXTERNAL_MODULE__904__) => {\nreturn ","module.exports = __WEBPACK_EXTERNAL_MODULE__904__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { Config, I18n, IdentityMap, Models, Validators } from \"loco-js-model\";\n\nclass Base {\n  setScope(name) {\n    Config.scope = name;\n  }\n\n  setResource(name) {\n    this.setScope(name);\n  }\n}\n\nconst Controllers = { Base };\n\nexport {\n  Config,\n  Controllers,\n  I18n,\n  IdentityMap,\n  Models,\n  Validators,\n};\n","class ObjectUtils\n  @toURIParams: (obj) ->\n    str = \"\"\n    for key, val of obj\n      if str isnt \"\"\n        str += \"&\"\n      str += (key + \"=\" + encodeURIComponent(val))\n    str\n\nexport default ObjectUtils","export default (httpMeth, url, opts) => {\n  const meta = document.querySelector(\"meta[name='csrf-token']\");\n  const req = new XMLHttpRequest();\n  req.withCredentials = opts.cookiesByCORS === true ? true : false;\n  req.open(httpMeth, url);\n  req.setRequestHeader(\"Accept\", \"application/json\");\n  if (meta) {\n    req.setRequestHeader(\"X-CSRF-Token\", meta.content);\n  }\n  if (opts.authorizationHeader != null) {\n    req.setRequestHeader(\"Authorization\", opts.authorizationHeader);\n  }\n  return req;\n};\n","const keys = [];\n\nexport default (key) => {\n  if (keys.includes(key)) return true;\n  keys.unshift(key);\n  if (keys.length > 100) keys.pop();\n  return false;\n};\n","import { Models } from './deps'\n\ngetModels = () ->\n  models = []\n  regExp = /^[A-Z]/\n  for func, _ of Models\n    continue if !regExp.exec(func) or func is \"Base\"\n    models.push func\n    for innerFunc, _ of Models[func]\n      models.push \"#{func}.#{innerFunc}\" if regExp.exec innerFunc\n  models\n\ngetModelForRemoteName = (remoteName) ->\n  for model in getModels()\n    parts = model.split \".\"\n    if parts.length is 1\n      return Models[parts[0]] if Models[parts[0]].getRemoteName() is remoteName\n    else if parts.length is 2\n      return Models[parts[0]][parts[1]] if Models[parts[0]][parts[1]].getRemoteName() is remoteName\n\nexport default getModelForRemoteName\n","import { IdentityMap } from \"../deps\";\nimport receivedAlready from \"../line/idempotencyKeys\";\nimport getModelForRemoteName from \"../getModelForRemoteName.coffee\";\n\nconst emitMessageToMembers = (\n  id,\n  name,\n  payload,\n  model,\n  identity,\n  obj = null\n) => {\n  if (obj === null) obj = new model({ id: id });\n  for (const connObj of IdentityMap.findConnected(identity, id)) {\n    connObj(name, payload);\n  }\n};\n\nconst emitMessageToCollection = (name, payload, identity) => {\n  for (const obj of IdentityMap.imap[identity][\"collection\"]) {\n    obj(`${identity} ${name}`, payload);\n  }\n};\n\nconst sendToNotificationCenter = (notificationCenter, type, payload, emit) => {\n  if (notificationCenter == null) return;\n  notificationCenter({ type, payload }, emit);\n};\n\nexport default (notification, opts = {}) => {\n  if (opts.log) console.log(notification);\n  const [className, id, name, payload] = notification;\n  if (receivedAlready(payload.loco.idempotency_key)) return false;\n  delete payload.loco;\n  const model = getModelForRemoteName(className);\n  if (model === undefined) {\n    sendToNotificationCenter(\n      opts.notificationCenter,\n      `${className} ${name}`,\n      payload,\n      opts.emit\n    );\n    return false;\n  }\n  const identity = model.getIdentity();\n  sendToNotificationCenter(\n    opts.notificationCenter,\n    `${identity} ${name}`,\n    payload,\n    opts.emit\n  );\n  if (IdentityMap.imap[identity] === undefined) return false;\n  if (IdentityMap.imap[identity][id] !== undefined)\n    emitMessageToMembers(id, name, payload, model, identity);\n  if (IdentityMap.imap[identity][\"collection\"] === undefined) return false;\n  if (IdentityMap.imap[identity][\"collection\"].length === 0) return false;\n  emitMessageToCollection(name, payload, identity);\n  return true;\n};\n","import { IdentityMap } from './deps'\nimport ObjectUtils from './utils/object.coffee'\nimport openRequest from './wire/openRequest'\nimport processNotification from \"./wire/processNotification\"\n\nclass Wire\n  constructor: (opts, notificationCenter, reqOpts) ->\n    this.pollingTime = opts.pollingTime ? 3000\n    this.log = if opts.log? and opts.log then true else false\n    this.ssl = opts.ssl\n    this.location = opts.location ? 'notification-center'\n    this.size = opts.size ? 100\n    this.protocolWithHost = opts.protocolWithHost\n    this.allowedDisconnectionTime = opts.allowedDisconnectionTime ? 10\n    this.disconnectedForTooLong = opts.disconnectedForTooLong\n    this.notificationCenter = notificationCenter\n    this.reqOpts = reqOpts\n    this.syncTime = null\n    this.token = null\n    this.pollingInterval = null\n    this.disconnectedSinceTime = null\n    this.uuid = null\n    this.line = null\n\n  setDisconnectedForTooLong: (fn) -> this.disconnectedForTooLong = fn\n\n  setLine: (line) -> this.line = line\n\n  setPollingTime: (val) ->\n    this.pollingTime = val\n    return if this.line?.connected\n    this.disconnect()\n    this.connect()\n\n  connect: ->\n    this.check();\n    this.pollingInterval = setInterval =>\n      if this.line?.connected\n        this.disconnect();\n        return\n      this.check();\n    , this.pollingTime\n\n  disconnect: ->\n    window.clearInterval(this.pollingInterval);\n\n  check: ->\n    request = openRequest('GET', this._getURL() + '?' + ObjectUtils.toURIParams(this._requestParams()), this.reqOpts)\n    request.onload = (e) =>\n      if e.target.status >= 200 and e.target.status < 400\n        data = JSON.parse e.target.response\n        this.disconnectedSinceTime = null\n        this.syncTime = data[1]\n        notifications = data[0]\n        return if notifications.length is 0\n        for notification in notifications\n          processNotification(notification, { log: this.log, notificationCenter: this.notificationCenter, emit: this.line.send })\n        this.check() if notifications.length is this.size\n      else if e.target.status >= 500\n        this._handleDisconnection()\n    request.onerror = =>\n      this._handleDisconnection()\n    request.send()\n\n  fetchSyncTime: (opts = {}) ->\n    request = openRequest('GET', \"#{this._getURL()}/sync-time\", this.reqOpts)\n    request.onerror = =>\n      this[opts.after]() if opts.after?\n    request.onload = (e) =>\n      if e.target.status >= 200 and e.target.status < 400\n        data = JSON.parse e.target.response\n        this.syncTime = data.sync_time\n        this[opts.after]() if opts.after?\n      else if e.target.status >= 500\n        this[opts.after]() if opts.after?\n    request.send()\n\n  _requestParams: ->\n    params = {synced_at: this.syncTime}\n    if this.token? then params.token = this.token\n    if this.uuid? then params.uuid = this.uuid\n    params\n\n  _getURL: ->\n    [protocol, _, host] = window.location.href.split '/'\n    if this.protocolWithHost?\n      [protocol, host] = this.protocolWithHost.split '//'\n    if this.ssl?\n      protocol = if this.ssl then 'https:' else \"http:\"\n    \"#{protocol}//#{host}/#{this.location}\"\n\n  _handleDisconnection: ->\n    if not this.disconnectedSinceTime?\n      this.disconnectedSinceTime = new Date()\n    diffInSec = (new Date() - this.disconnectedSinceTime) / 1000\n    if diffInSec > this.allowedDisconnectionTime and this.disconnectedForTooLong?\n      this.disconnectedForTooLong(this.disconnectedSinceTime)\n\nexport default Wire","import processNotification from \"./wire/processNotification\";\nimport processSystemNotification from \"./line/processSystemNotification\";\n\nclass Line {\n  constructor(cable, notificationCenter, wire) {\n    this.cable = cable;\n    this.notificationCenter = notificationCenter;\n    this.wire = wire;\n    this.connected = false;\n    this.subscription = null;\n  }\n\n  connect() {\n    this.subscription = this.cable.subscriptions.create(\n      {\n        channel: \"Loco::NotificationCenterChannel\",\n      },\n      {\n        connected: () => {\n          console.log(\"WS connected\");\n          this.connected = true;\n          this.notificationCenter({ loco: \"connected\" });\n          this.pong();\n        },\n        disconnected: () => {\n          console.log(\"WS disconnected\");\n          this.connected = false;\n          if (this.wire !== null) {\n            this.wire.uuid = null;\n            this.wire.fetchSyncTime({ after: \"connect\" });\n          }\n          this.notificationCenter({ loco: \"disconnected\" });\n        },\n        rejected: () => {\n          console.log(\"WS rejected\");\n          this.notificationCenter({ loco: \"rejected\" });\n        },\n        received: (data) => {\n          if (data.loco != null) {\n            const res = processSystemNotification(data.loco, {\n              line: this,\n              wire: this.wire,\n              processNotification,\n              notificationCenter: this.notificationCenter,\n            });\n            if (res !== true) return;\n            delete data.loco;\n          }\n          if (Object.keys(data).length === 0) return;\n          this.notificationCenter(data);\n        },\n      }\n    );\n  }\n\n  send(payload) {\n    this.subscription.send(payload);\n  }\n\n  pong() {\n    setTimeout(() => this.send({ loco: { pong: true } }), 3000);\n  }\n}\n\nexport default Line;\n","import receivedAlready from \"./idempotencyKeys\";\n\nexport default (\n  data,\n  { line, wire, processNotification, notificationCenter }\n) => {\n  if (data.ping === true) {\n    line.pong();\n  }\n  if (wire == null) return;\n  if (typeof data.sync_time === \"string\") {\n    wire.syncTime = data.sync_time;\n  }\n  if (typeof data.uuid === \"string\") {\n    console.log(`uuid: ${data.uuid}`);\n    wire.uuid = data.uuid;\n  }\n  if (\n    typeof data.notification === \"object\" &&\n    data.notification.constructor.name === \"Array\"\n  ) {\n    processNotification(data.notification, {\n      log: wire.log,\n      notificationCenter,\n      emit: this.line.send\n    });\n  }\n  if (typeof data.idempotency_key === \"string\") {\n    if (receivedAlready(data.idempotency_key)) return false;\n  }\n  return true;\n};\n","import { IdentityMap } from './deps'\nimport Wire from './wire.coffee'\nimport Line from './line'\n\nclass Loco\n  constructor: (models) ->\n    this.models = models\n    this.wire = null\n    this.line = null\n\n  getModels: -> this.models\n\n  getLine: -> this.line?.subscription\n\n  getWire: -> this.wire\n\n  setAuthorizationHeader: (val) ->\n    for key, model of this.models\n      model.authorizationHeader = val\n\n  setDisconnectedForTooLong: (fn) ->\n    this.wire.setDisconnectedForTooLong(fn);\n\n  init: (opts) ->\n    notificationsParams = opts.notifications ? {}\n    notificationsParams.protocolWithHost = opts.protocolWithHost\n    if notificationsParams.enable isnt false\n      wireOpts = { cookiesByCORS: opts.cookiesByCORS, authorizationHeader: opts.authorizationHeader }\n      this.wire = new Wire(notificationsParams, opts.notificationCenter, wireOpts)\n      this.wire.fetchSyncTime({ after: 'connect' })\n    if opts.cable?\n      this.line = new Line(opts.cable, opts.notificationCenter, this.wire)\n      this.line.connect()\n    if this.wire?\n      this.wire.setLine(this.line);\n    this._ready =>\n      IdentityMap.clear()\n      opts.postInit() if opts.postInit?\n\n  emit: (payload) -> this.line.send(payload)\n\n  _ready: (fn) ->\n    cond = if document.attachEvent then document.readyState is \"complete\" else document.readyState isnt \"loading\"\n    if cond\n      fn()\n    else\n      document.addEventListener 'DOMContentLoaded', fn\n\nexport default Loco","import Loco from \"./loco.coffee\";\nimport {\n  Config,\n  Controllers,\n  I18n,\n  IdentityMap,\n  Models,\n  Validators,\n} from \"./deps\";\n\nconst processModels = (opts) => {\n  const models = opts.models || {};\n  for (const i of Object.keys(models)) {\n    Models[i] = models[i];\n    if (opts.protocolWithHost != null) {\n      Models[i].protocolWithHost = opts.protocolWithHost;\n    }\n    if (opts.authorizationHeader != null) {\n      Models[i].authorizationHeader = opts.authorizationHeader;\n    }\n    if (opts.cookiesByCORS != null) {\n      Models[i].cookiesByCORS = opts.cookiesByCORS;\n    }\n  }\n  return models;\n};\n\nconst getLocale = () => Config.locale;\nconst setLocale = (locale) => (Config.locale = locale);\n\nconst init = (opts) => {\n  Config.cookiesByCORS = opts.cookiesByCORS || false;\n  Config.locale = opts.locale || \"en\";\n  for (const i of Object.keys(opts.controllers || {})) {\n    Controllers[i] = opts.controllers[i];\n  }\n  const models = processModels(opts);\n  const loco = new Loco(models);\n  loco.init(opts);\n  return loco;\n};\n\nconst subscribe = IdentityMap.subscribe;\n\nexport {\n  getLocale,\n  setLocale,\n  init,\n  subscribe,\n  Controllers,\n  I18n,\n  Models,\n  Validators,\n};\n"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__904__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","Controllers","Base","_classCallCheck","name","Config","scope","this","setScope","toURIParams","str","encodeURIComponent","val","httpMeth","url","opts","meta","document","querySelector","req","XMLHttpRequest","withCredentials","cookiesByCORS","open","setRequestHeader","content","authorizationHeader","keys","includes","unshift","length","pop","getModels","models","regExp","exec","func","push","innerFunc","sendToNotificationCenter","notificationCenter","type","payload","emit","notification","arguments","log","console","_notification","className","id","receivedAlready","loco","idempotency_key","model","remoteName","parts","split","Models","getRemoteName","getModelForRemoteName","concat","identity","getIdentity","IdentityMap","imap","_step","_iterator","_createForOfIteratorHelper","findConnected","s","n","done","connObj","err","e","f","emitMessageToMembers","_step2","_iterator2","emitMessageToCollection","Wire","reqOpts","pollingTime","ssl","location","size","protocolWithHost","allowedDisconnectionTime","disconnectedForTooLong","syncTime","token","pollingInterval","disconnectedSinceTime","uuid","line","setDisconnectedForTooLong","fn","setLine","setPollingTime","connected","disconnect","connect","check","setInterval","window","clearInterval","request","openRequest","_getURL","_requestParams","onload","i","target","status","data","JSON","parse","response","notifications","processNotification","send","_handleDisconnection","onerror","fetchSyncTime","after","sync_time","params","synced_at","protocol","href","host","Date","Line","cable","wire","subscription","_this","subscriptions","create","channel","pong","disconnected","rejected","received","_ref","ping","_typeof","constructor","processSystemNotification","_this2","setTimeout","getLine","getWire","setAuthorizationHeader","init","notificationsParams","enable","wireOpts","_ready","clear","postInit","attachEvent","readyState","addEventListener","getLocale","locale","setLocale","_i2","_Object$keys2","controllers","_i","_Object$keys","processModels","Loco","subscribe"],"sourceRoot":""}